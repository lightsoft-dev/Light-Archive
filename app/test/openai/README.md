# OpenAI API í…ŒìŠ¤íŠ¸ í˜ì´ì§€

## ğŸ“ í˜ì´ì§€ ìœ„ì¹˜
`/test/openai`

## ğŸ¯ ëª©ì 
Light Archive í”„ë¡œì íŠ¸ì—ì„œ ì‚¬ìš©í•˜ëŠ” OpenAI APIê°€ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.

## âœ¨ ì£¼ìš” ê¸°ëŠ¥

### 1. API Key ìƒíƒœ í™•ì¸
- í™˜ê²½ ë³€ìˆ˜ì— `OPENAI_API_KEY`ê°€ ì„¤ì •ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸
- API Key í˜•ì‹ ê²€ì¦ (sk-ë¡œ ì‹œì‘í•˜ëŠ”ì§€)
- ì‹¤ì‹œê°„ ìƒíƒœ í‘œì‹œ (ì²´í¬ ì•„ì´ì½˜)

### 2. í”„ë¡¬í”„íŠ¸ í…ŒìŠ¤íŠ¸
- ììœ ë¡­ê²Œ í”„ë¡¬í”„íŠ¸ ì…ë ¥ ê°€ëŠ¥
- OpenAI API í˜¸ì¶œ ë° ì‘ë‹µ í™•ì¸
- ì—ëŸ¬ ì²˜ë¦¬ ë° ìƒì„¸ ë¡œê·¸ í‘œì‹œ

### 3. í…œí”Œë¦¿ ì˜ˆì‹œ
- **ê¸°ìˆ  ë¬¸ì„œ ì´ˆì•ˆ**: ê¸°ìˆ  ë¬¸ì„œ ìŠ¤íƒ€ì¼ë¡œ ì´ˆì•ˆ ìƒì„±
- **í”„ë¡œì íŠ¸ ê°œìš”**: í”„ë¡œì íŠ¸ ì„¤ëª… ìƒì„±
- **ìš”ì•½ ìƒì„±**: ê¸´ í…ìŠ¤íŠ¸ë¥¼ í•œ ë¬¸ì¥ìœ¼ë¡œ ìš”ì•½
- **íƒœê·¸ ì œì•ˆ**: í”„ë¡œì íŠ¸ì— ë§ëŠ” íƒœê·¸ ì¶”ì²œ

## ğŸ› ï¸ ì‚¬ìš© ë°©ë²•

### 1. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
`.env.local` íŒŒì¼ì— OpenAI API Key ì¶”ê°€:
```env
OPENAI_API_KEY=sk-proj-...
```

### 2. ê°œë°œ ì„œë²„ ì‹¤í–‰
```bash
pnpm dev
```

### 3. í…ŒìŠ¤íŠ¸ í˜ì´ì§€ ì ‘ì†
ë¸Œë¼ìš°ì €ì—ì„œ `http://localhost:3000/test/openai` ì ‘ì†

### 4. í…ŒìŠ¤íŠ¸ ì‹¤í–‰
1. API Key ìƒíƒœê°€ "âœ… ì„¤ì •ë˜ì–´ ìˆìŠµë‹ˆë‹¤"ì¸ì§€ í™•ì¸
2. í…œí”Œë¦¿ ì˜ˆì‹œ ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒí•˜ê±°ë‚˜ ì§ì ‘ í”„ë¡¬í”„íŠ¸ ì…ë ¥
3. "OpenAI í…ŒìŠ¤íŠ¸ ì‹¤í–‰" ë²„íŠ¼ í´ë¦­
4. ì‘ë‹µ í™•ì¸

## ğŸ“Š API ì„¤ì •

### í˜„ì¬ ì„¤ì •
- **ëª¨ë¸**: `gpt-4o-mini` (ë¹ ë¥´ê³  ì €ë ´í•œ ëª¨ë¸)
- **ìµœëŒ€ í† í°**: 500ê°œ
- **Temperature**: 0.7 (ì°½ì˜ì„± ìˆ˜ì¤€)
- **System Prompt**: "ê¸°ìˆ  ë¬¸ì„œ ì‘ì„± ì „ë¬¸ê°€"

### ì„¤ì • ë³€ê²½
`app/api/openai/test/route.ts` íŒŒì¼ì—ì„œ ìˆ˜ì • ê°€ëŠ¥:

```typescript
const completion = await openai.chat.completions.create({
  model: "gpt-4o-mini", // ëª¨ë¸ ë³€ê²½: gpt-4, gpt-4-turbo ë“±
  max_tokens: 500,      // ì‘ë‹µ ê¸¸ì´ ì¡°ì •
  temperature: 0.7,     // ì°½ì˜ì„± ì¡°ì • (0~2)
})
```

## ğŸ” API ë¼ìš°íŠ¸

### 1. API Key ì²´í¬
- **ê²½ë¡œ**: `GET /api/openai/check`
- **ê¸°ëŠ¥**: í™˜ê²½ ë³€ìˆ˜ì— API Keyê°€ ì„¤ì •ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸
- **ì‘ë‹µ**:
  ```json
  {
    "configured": true,
    "message": "API Keyê°€ ì„¤ì •ë˜ì–´ ìˆìŠµë‹ˆë‹¤"
  }
  ```

### 2. OpenAI í…ŒìŠ¤íŠ¸
- **ê²½ë¡œ**: `POST /api/openai/test`
- **Request Body**:
  ```json
  {
    "prompt": "í”„ë¡¬í”„íŠ¸ ë‚´ìš©"
  }
  ```
- **ì‘ë‹µ (ì„±ê³µ)**:
  ```json
  {
    "success": true,
    "response": "OpenAI ì‘ë‹µ ë‚´ìš©",
    "usage": {
      "prompt_tokens": 50,
      "completion_tokens": 100,
      "total_tokens": 150
    },
    "model": "gpt-4o-mini"
  }
  ```
- **ì‘ë‹µ (ì‹¤íŒ¨)**:
  ```json
  {
    "error": "ì—ëŸ¬ ë©”ì‹œì§€"
  }
  ```

## âš ï¸ ì—ëŸ¬ ì²˜ë¦¬

### 401 Unauthorized
```
OpenAI API Keyê°€ ìœ íš¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
â†’ .env.local íŒŒì¼ì˜ OPENAI_API_KEYë¥¼ í™•ì¸í•˜ì„¸ìš”
```

### 429 Too Many Requests
```
OpenAI API ìš”ì²­ í•œë„ë¥¼ ì´ˆê³¼í–ˆìŠµë‹ˆë‹¤.
â†’ ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•˜ì„¸ìš”
â†’ OpenAI Dashboardì—ì„œ ìš”ì²­ í•œë„ í™•ì¸
```

### 500 Server Error
```
OpenAI ì„œë²„ ì—ëŸ¬ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.
â†’ ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•˜ì„¸ìš”
â†’ OpenAI Status í˜ì´ì§€ í™•ì¸ (status.openai.com)
```

## ğŸ’° ë¹„ìš© ê´€ë¦¬

### gpt-4o-mini ê°€ê²© (2025ë…„ 1ì›” ê¸°ì¤€)
- **Input**: $0.150 / 1M tokens
- **Output**: $0.600 / 1M tokens

### ì˜ˆì‹œ ê³„ì‚°
- í”„ë¡¬í”„íŠ¸ 100 í† í° + ì‘ë‹µ 400 í† í° = 500 í† í°
- ë¹„ìš©: (100 Ã— $0.15 + 400 Ã— $0.6) / 1,000,000 = **$0.00026** (ì•½ 0.3ì›)

### ë¹„ìš© ì ˆê° íŒ
1. `max_tokens`ë¥¼ í•„ìš”í•œ ë§Œí¼ë§Œ ì„¤ì •
2. ì§§ê³  ëª…í™•í•œ í”„ë¡¬í”„íŠ¸ ì‘ì„±
3. ë¶ˆí•„ìš”í•œ í…ŒìŠ¤íŠ¸ ë°˜ë³µ ì§€ì–‘
4. OpenAI Dashboardì—ì„œ ì‚¬ìš©ëŸ‰ ëª¨ë‹ˆí„°ë§

## ğŸ”— ê´€ë ¨ ë§í¬

- [OpenAI API ë¬¸ì„œ](https://platform.openai.com/docs)
- [OpenAI ëª¨ë¸ ê°€ê²©](https://openai.com/api/pricing/)
- [OpenAI Dashboard](https://platform.openai.com/)
- [OpenAI Status](https://status.openai.com/)

## ğŸš€ ì‹¤ì œ í”„ë¡œì íŠ¸ ì ìš©

ì´ í…ŒìŠ¤íŠ¸ í˜ì´ì§€ê°€ ì •ìƒ ì‘ë™í•˜ë©´, `/app/admin/new/page.tsx`ì˜ AI ì´ˆì•ˆ ìƒì„± ê¸°ëŠ¥ì—ì„œ ì‹¤ì œ OpenAI APIë¥¼ í˜¸ì¶œí•˜ë„ë¡ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### í˜„ì¬ ìƒíƒœ (app/admin/new/page.tsx:92-95)
```typescript
// TODO: AI API í˜¸ì¶œ
// í˜„ì¬ëŠ” ì‹œë®¬ë ˆì´ì…˜
await new Promise(resolve => setTimeout(resolve, 2000))
```

### ìˆ˜ì • ë°©ì•ˆ
```typescript
// OpenAI API í˜¸ì¶œ
const response = await fetch("/api/openai/generate-draft", {
  method: "POST",
  headers: { "Content-Type": "application/json" },
  body: JSON.stringify({
    prompt: aiPrompt,
    title,
    category,
  }),
})
const data = await response.json()
setContent(data.response)
```

## ğŸ“ ì°¸ê³ ì‚¬í•­

- ì´ í˜ì´ì§€ëŠ” **ê°œë°œ í™˜ê²½**ì—ì„œë§Œ ì‚¬ìš©í•˜ì„¸ìš”
- í”„ë¡œë•ì…˜ ë°°í¬ ì‹œì—ëŠ” `/test` í´ë”ë¥¼ ì œì™¸í•˜ê±°ë‚˜ ì¸ì¦ì„ ì¶”ê°€í•˜ì„¸ìš”
- API KeyëŠ” **ì ˆëŒ€ í´ë¼ì´ì–¸íŠ¸ì— ë…¸ì¶œí•˜ì§€ ë§ˆì„¸ìš”** (ì„œë²„ API ë¼ìš°íŠ¸ì—ì„œë§Œ ì‚¬ìš©)
- OpenAI API ìš”ì²­ ì œí•œì„ ê³ ë ¤í•˜ì—¬ í…ŒìŠ¤íŠ¸í•˜ì„¸ìš” (ê¸°ë³¸: ë¶„ë‹¹ 10íšŒ)
